<div class="ad-page">

    <!-- DESKTOP START -->
    <div ng-if="!isMobile" class="ng-class:[{'ad-page-container-flex-row':parallelMode},{'ad-page-container-flex':!parallelMode}]">

        <!-- PRIMARY BLOCK START -->
        <div class="db-block db-margin-05 ng-class:[{'db-block-close':c.bm === c.bms.SECONDARY},{'db-block-open':c.bm !== c.bms.SECONDARY}]">

            <!-- PRIMARY BLOCK HEADER -->
            <div class="btn-group db-block-hdr db-prim-bg db-brd-top db-padding-2">

                <button ng-if="menuClosed()" type="button" class="btn db-btn-prim db-btn-small db-brd db-margin-2" ng-click="openMenu()"><span class="glyphicon glyphicon-menu-hamburger"></span></button>
                <button ng-if="menuClosed()" type="button" class="btn db-btn-prim db-btn-small db-brd db-margin-2" ng-click="c.toggleParallelMode()">
                    <span class="glyphicon ng-class:[{'glyphicon-resize-vertical':parallelMode},{'glyphicon-resize-horizontal':!parallelMode}]"></span>
                </button>
                <button type="button" class="btn db-btn-prim db-btn-small db-brd db-margin-2" ng-disabled="parallelMode" ng-click="c.primaryClicked()">
                    <span class="glyphicon ng-class:[{'glyphicon-minus':c.bm === c.bms.PRIMARY},{'glyphicon-plus':c.bm !== c.bms.PRIMARY}]"></span>
                </button>

            </div>

            <!-- PRIMARY BLOCK CONTENT -->
            <div class="db-block-content db-block-border db-brd-bottom">

                <db-pdf ng-if="!c.isSecret(c.tData)" ng-attr-uri="c.primaryUrl"></db-pdf>
                <db-imgviewer ng-if="c.isSecret(c.tData)" file-conf="c.tData"></db-imgviewer>
                <div ng-if="c.error" class="alert alert-danger" role="alert">{{c.error}}</div>

            </div>

        </div>
        <!-- PRIMARY BLOCK END -->

        <!-- SECONDARY  BLOCK START -->
        <div class="db-block db-margin-05 ng-class:[{'db-block-close':c.bm === c.bms.PRIMARY},{'db-block-open':c.bm !== c.bms.PRIMARY}]">

            <!-- SECONDARY  BLOCK HEADER -->
            <div class="btn-group db-block-hdr db-prim-bg db-brd-top db-padding-2">

                <button type="button" class="btn db-btn-prim db-btn-small db-brd db-margin-2" ng-disabled="parallelMode" ng-click="c.secondaryClicked()">
                    <span class="glyphicon ng-class:[{'glyphicon-minus':c.bm === c.bms.SECONDARY},{'glyphicon-plus':c.bm !== c.bms.SECONDARY}]"></span>
                </button>

                <button type="button" class="btn db-btn-sel db-btn-big db-brd db-margin-2 ng-class:[{'active':c.lbm === c.lbms.ATTACHMENTS}]"
                    db-confirm confirm-enabled="c.hasUnsavedProposal || c.remarkIsUnsaved" confirm-config="c.unsavedConfig" ng-click="c.attClicked()">
                    <span translate translate-cloak>STR_ATTACHMENTS</span>
                    <span ng-if="c.aData.objects.length" class="badge ng-cloak">{{c.aData.objects.length}}</span>
                </button>
                <button type="button" class="btn db-btn-sel db-btn-big db-brd db-margin-2 ng-class:[{'active':c.lbm === c.lbms.MATERIALS}]"
                    db-confirm confirm-enabled="c.hasUnsavedProposal || c.remarkIsUnsaved" confirm-config="c.unsavedConfig" ng-click="c.matClicked()">
                    <span translate translate-cloak>STR_OTHER_MATERIAL</span>
                    <span ng-if="c.materialCount()" class="badge ng-cloak">{{c.materialCount()}}</span>
                </button>
                <button type="button" class="btn db-btn-sel db-btn-big btn-block db-brd db-margin-2 ng-class:[{'active':c.lbm === c.lbms.PROPOSALS}]"
                    db-confirm confirm-enabled="c.hasUnsavedProposal || c.remarkIsUnsaved" confirm-config="c.unsavedConfig" ng-click="c.proposalsClicked()">
                    <span translate translate-cloak>STR_PROPOSALS</span>
                    <span ng-if="c.propCount" class="badge ng-cloak">{{c.propCount}}</span>
                    <span ng-show="c.topic.isModified" class="glyphicon glyphicon-bell db-newprops" aria-hidden="true"></span>
                </button>
                <button type="button" class="btn db-btn-sel db-btn-big db-brd db-margin-2 ng-class:[{'active':c.lbm === c.lbms.REMARK}]"
                    ng-click="c.remarkClicked()">
                    <span translate translate-cloak>STR_REMARK</span>
                </button>

            </div>

            <!-- SECONDARY BLOCK CONTENT -->
            <div ng-hide="c.selData" class="db-block-content db-block-border db-brd-bottom">

                <db-pdf ng-if="(c.lbm === c.lbms.ATTACHMENTS || c.lbm === c.lbms.MATERIALS) && !c.isSecret(c.secondaryAtt)" ng-attr-uri="c.secondaryUrl"></db-pdf>
                <db-imgviewer ng-if="(c.lbm === c.lbms.ATTACHMENTS || c.lbm === c.lbms.MATERIALS) && c.isSecret(c.secondaryAtt)" file-conf="c.secondaryAtt"></db-imgviewer>
                <db-remark ng-if="c.lbm === c.lbms.REMARK" topic="c.topic"></db-remark>
                <db-proposal-list ng-if="c.lbm === c.lbms.PROPOSALS" topic="c.topic"></db-proposal-list>
            </div>
            <div ng-hide="!c.selData" class="db-block-content db-block-border db-brd-bottom">
                <db-selection-list ng-attr-sel-data="c.selData" ng-attr-on-select="c.selClicked(data)"></db-selection-list>
            </div>

        </div>
        <!-- SECONDARY BLOCK END -->

    </div>
    <!-- DESKTOP END -->

    <!-- MOBILE START -->
    <div ng-if="isMobile" class="ad-page-header db-center-v">
        <button type="button" class="btn db-btn-prim db-no-margin" ng-click="goBack()">
            <span class="glyphicon glyphicon-menu-left"></span>
        </button>
        <h4 translate translate-cloak>STR_CONTENT</h4>
    </div>

    <div ng-if="isMobile" class="ad-page-content">
        <h5 class="db-title" ng-cloak>{{c.header}}</h5>
        <div class="ad-page-container">
            <db-link config="c.linkConfig" uri="c.tData.link" class="btn btn-block btn-lg db-btn-sel"></db-link>
            <button type="button" ng-disabled="!c.aData.objects.length" class="btn btn-info btn-lg btn-block wrap-button-text db-btn-sel"
                ng-click="c.attachmentClicked()">
                <span translate translate-cloak>STR_ATTACHMENTS</span>
                <span class="badge">{{c.aData.objects.length}}</span>
            </button>
            <button type="button" ng-disabled="!c.amData.objects.length" class="btn btn-info btn-lg btn-block wrap-button-text db-btn-sel ng-class:[{'disabled': !c.amData.objects.length}]"
                ng-click="c.additionalMaterialClicked()">
                <span translate translate-cloak>STR_ADDITIONAL_MATERIAL</span>
                <span class="badge">{{c.amData.objects.length}}</span>
            </button>
            <button type="button" ng-disabled="!c.dData.objects.length" class="btn btn-info btn-lg btn-block wrap-button-text db-btn-sel"
                ng-click="c.decisionClicked()">
                <span translate translate-cloak>STR_DECISION_HISTORY</span>
                <span class="badge">{{c.dData.objects.length}}</span>
            </button>
            <button type="button" class="btn btn-info btn-lg btn-block wrap-button-text db-btn-sel" ng-click="c.proposalsClicked()">
                <span translate translate-cloak>STR_PROPOSALS</span>
                <span ng-if="c.propCount !== null" class="badge">
                    <span class="db-center-v">
                        {{c.propCount}}
                        <span ng-show="c.topic.isModified">
                            &nbsp;<span class="glyphicon glyphicon-bell db-newprops" aria-hidden="true"></span>
                        </span>
                    </span>
                </span>
            </button>
            <button type="button" class="btn btn-info btn-lg btn-block wrap-button-text db-btn-sel" ng-click="c.remarkClicked()">
                <span translate translate-cloak>STR_REMARK</span>
            </button>
        </div>
    </div>
    <!-- MOBILE END -->

</div>

<ui-view ng-if="isMobile " name="childContent "></ui-view>
